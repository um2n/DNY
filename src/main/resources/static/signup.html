<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>회원가입 - Vue.js</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        .input-group { margin-bottom: 10px; }
        label { display: inline-block; width: 80px; }
        input { padding: 5px; }
        button { cursor: pointer; padding: 5px 15px; margin-top: 10px; }
    </style>
</head>
<body>
<div id="app">
    <h2>회원가입</h2>
    <div class="input-group">
        <label for="loginId">아이디</label>
        <input id="loginId" v-model="form.loginId" placeholder="아이디">
    </div>
    <div class="input-group">
        <label for="password">비밀번호</label>
        <input id="password" v-model="form.password" type="password" placeholder="비밀번호" @keyup.enter="signup">
    </div>
    <button @click="signup">회원가입</button>
</div>

<script>
    const { createApp } = Vue;
    createApp({
        data() {
            return {
                form: { loginId: '', password: '' }
            }
        },
        methods: {
            signup() {
                if (!this.form.loginId || !this.form.password) {
                    alert("아이디와 비밀번호를 입력해주세요.");
                    return;
                }
                fetch("/auth/signup", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(this.form)
                }).then(res => {
                    if (res.ok) {
                        alert("회원가입 성공! 로그인 해주세요.");
                        location.href = "/login.html";
                    } else {
                        alert("회원가입 실패 (이미 존재하는 아이디일 수 있습니다.)");
                    }
                }).catch(err => console.error("회원가입 에러:", err));
            }
        }
    }).mount('#app');
</script>
</body>
</html>
